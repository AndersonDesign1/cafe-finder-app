---
import '../styles/globals.css'
import Layout from '../layouts/Layout.astro';
import { Header } from '../components/Header';
import { ThemeProvider } from '../components/ThemeProvider';
import { MapPage } from '../components/MapPage';
---

<Layout title="Interactive Map - CafÃ©Work">
	<ThemeProvider client:load>
		<div class="min-h-screen bg-background">
			<Header client:load />
			<main class="container mx-auto px-4 py-8">
				<MapPage client:only="react" />
			</main>
		</div>
	</ThemeProvider>
</Layout>

<style>
	/* Light theme popup styles */
	:global(.light-popup .leaflet-popup-content-wrapper) {
		border-radius: 8px;
		box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
		padding: 0;
		background: white;
		color: #111827;
	}

	:global(.light-popup .leaflet-popup-tip) {
		background: white;
	}

	/* Dark theme popup styles */
	:global(.dark-popup .leaflet-popup-content-wrapper) {
		border-radius: 8px;
		box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
		padding: 0;
		background: #374151;
		color: white;
		border: 1px solid #6b7280;
	}

	:global(.dark-popup .leaflet-popup-tip) {
		background: #374151;
		border-top: 1px solid #6b7280;
		border-left: 1px solid #6b7280;
	}

	:global(.leaflet-popup-content) {
		margin: 0;
		line-height: 1.4;
	}

	:global(.custom-marker) {
		background: transparent !important;
		border: none !important;
	}

	:global(.custom-cluster-icon) {
		background: transparent !important;
		border: none !important;
	}

	/* Dark theme map container */
	:global(.dark-map) {
		filter: brightness(0.9) contrast(1.1);
	}

	:global(.light-map) {
		filter: none;
	}

	/* Responsive map container */
	:global(.leaflet-container) {
		font-family: inherit;
	}

	/* Custom control styling with better contrast */
	:global(.leaflet-control-custom) {
		cursor: pointer;
		text-align: center;
		transition: all 0.2s ease;
	}

	/* Attribution styling for dark theme */
	:global(.dark-map .leaflet-control-attribution) {
		background-color: rgba(55, 65, 81, 0.9) !important;
		color: white !important;
		border: 1px solid #6b7280 !important;
	}

	:global(.dark-map .leaflet-control-attribution a) {
		color: #93c5fd !important;
	}

	/* Zoom control styling for dark theme */
	:global(.dark-map .leaflet-control-zoom a) {
		background-color: #374151 !important;
		color: white !important;
		border: 1px solid #6b7280 !important;
	}

	:global(.dark-map .leaflet-control-zoom a:hover) {
		background-color: #4b5563 !important;
	}

	/* Light theme zoom control */
	:global(.light-map .leaflet-control-zoom a) {
		background-color: white !important;
		color: #374151 !important;
		border: 1px solid #d1d5db !important;
	}

	:global(.light-map .leaflet-control-zoom a:hover) {
		background-color: #f9fafb !important;
	}

	/* Scale control responsive styling */
	:global(.leaflet-control-scale) {
		font-size: 11px;
		line-height: 1.1;
		font-weight: 500;
	}

	/* Cluster styling with better contrast */
	:global(.marker-cluster-small) {
		background-color: rgba(59, 130, 246, 0.7) !important;
		border: 2px solid white !important;
	}

	:global(.marker-cluster-medium) {
		background-color: rgba(59, 130, 246, 0.8) !important;
		border: 2px solid white !important;
	}

	:global(.marker-cluster-large) {
		background-color: rgba(59, 130, 246, 0.9) !important;
		border: 2px solid white !important;
	}

	/* Dark theme cluster styling */
	:global(.dark-map .marker-cluster-small) {
		background-color: rgba(79, 70, 229, 0.8) !important;
		border: 2px solid #374151 !important;
	}

	:global(.dark-map .marker-cluster-medium) {
		background-color: rgba(79, 70, 229, 0.9) !important;
		border: 2px solid #374151 !important;
	}

	:global(.dark-map .marker-cluster-large) {
		background-color: rgba(79, 70, 229, 1) !important;
		border: 2px solid #374151 !important;
	}

	/* Responsive adjustments */
	@media (max-width: 768px) {
		:global(.leaflet-popup-content-wrapper) {
			max-width: 280px !important;
		}

		:global(.leaflet-control-zoom) {
			margin-left: 5px !important;
			margin-top: 5px !important;
		}

		:global(.leaflet-control-scale) {
			margin-bottom: 5px !important;
			margin-left: 5px !important;
		}
	}

	/* Improve text contrast in badges and buttons */
	:global(.dark-popup .badge) {
		background-color: #4b5563 !important;
		color: #e5e7eb !important;
		border-color: #6b7280 !important;
	}

	:global(.light-popup .badge) {
		background-color: #f3f4f6 !important;
		color: #374151 !important;
		border-color: #d1d5db !important;
	}
</style>